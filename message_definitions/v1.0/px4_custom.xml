<?xml version="1.0"?>
<mavlink>
  <!-- 包含 development.xml 作为基础 (development 已包含 common) -->
  <include>development.xml</include>

  <messages>
    <!-- 重新定义 SYS_STATUS 消息,只保留 5 个字段 -->
    <message id="1" name="SYS_STATUS">
      <description>Simplified system status with only timestamp and sensor bitmaps for PX4</description>

      <!-- 只保留 5 个字段 -->
      <field type="uint64_t" name="time_unix_usec" units="us">Unix timestamp (microseconds since UNIX epoch)</field>
      <field type="uint32_t" name="time_boot_ms" units="ms">Timestamp (milliseconds since system boot)</field>
      <field type="uint32_t" name="onboard_control_sensors_present" enum="MAV_SYS_STATUS_SENSOR" display="bitmask" print_format="0x%08x">Bitmap showing which onboard controllers and sensors are present. Value of 0: not present. Value of 1: present.</field>
      <field type="uint32_t" name="onboard_control_sensors_enabled" enum="MAV_SYS_STATUS_SENSOR" display="bitmask" print_format="0x%08x">Bitmap showing which onboard controllers and sensors are enabled:  Value of 0: not enabled. Value of 1: enabled.</field>
      <field type="uint32_t" name="onboard_control_sensors_health" enum="MAV_SYS_STATUS_SENSOR" display="bitmask" print_format="0x%08x">Bitmap showing which onboard controllers and sensors have an error (or are operational). Value of 0: error. Value of 1: healthy.</field>
    </message>

    <!-- 重新定义 GPS_RAW_INT 消息,只保留 9 个基础字段 -->
    <message id="24" name="GPS_RAW_INT">
      <description>Simplified GPS raw data with only essential fields for PX4</description>

      <!-- 只保留 9 个基础字段 (无 vel) -->
      <field type="uint64_t" name="time_usec" units="us">Timestamp (UNIX Epoch time or time since system boot)</field>
      <field type="uint8_t" name="fix_type" enum="GPS_FIX_TYPE">GPS fix type</field>
      <field type="int32_t" name="lat" units="degE7">Latitude (WGS84, EGM96 ellipsoid)</field>
      <field type="int32_t" name="lon" units="degE7">Longitude (WGS84, EGM96 ellipsoid)</field>
      <field type="int32_t" name="alt" units="mm">Altitude (MSL)</field>
      <field type="uint16_t" name="eph" invalid="UINT16_MAX">GPS HDOP horizontal dilution of position (unitless * 100)</field>
      <field type="uint16_t" name="epv" invalid="UINT16_MAX">GPS VDOP vertical dilution of position (unitless * 100)</field>
      <field type="uint16_t" name="cog" units="cdeg" invalid="UINT16_MAX">Course over ground in degrees * 100</field>
      <field type="uint8_t" name="satellites_visible" invalid="UINT8_MAX">Number of satellites visible</field>
    </message>

    <!-- 重新定义 VFR_HUD 消息,整合来自多个原始消息的字段 -->
    <message id="74" name="VFR_HUD">
      <description>Simplified VFR HUD data integrating fields from VFR_HUD (74), GLOBAL_POSITION_INT (33), WIND_COV (231), and MISSION_CURRENT (42) for PX4</description>

      <!-- 来自原始 VFR_HUD (74) 的 5 个字段 -->
      <field type="float" name="airspeed" units="m/s">Vehicle speed (CAS/IAS for fixed-wing, groundspeed for multirotor)</field>
      <field type="float" name="groundspeed" units="m/s">Current ground speed</field>
      <field type="int16_t" name="heading" units="deg">Current heading (0-360, 0=north)</field>
      <field type="uint16_t" name="throttle" units="%">Current throttle setting (0 to 100)</field>
      <field type="float" name="climb" units="m/s">Current climb rate</field>

      <!-- 来自 GLOBAL_POSITION_INT (33) -->
      <field type="int32_t" name="relative_alt" units="mm">Altitude above home</field>

      <!-- 来自 WIND_COV (231) 的 3 个风速字段 -->
      <field type="float" name="wind_x" units="m/s" invalid="NaN">Wind in North (NED) direction</field>
      <field type="float" name="wind_y" units="m/s" invalid="NaN">Wind in East (NED) direction</field>
      <field type="float" name="wind_z" units="m/s" invalid="NaN">Wind in down (NED) direction</field>

      <!-- 来自 MISSION_CURRENT (42) -->
      <field type="uint16_t" name="seq">Current mission sequence number</field>
    </message>

  </messages>
</mavlink>

